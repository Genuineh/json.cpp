# JSON ?????

????????????? `jt::Json` JSON ???????

## ????

???????????

1. **?? JSON ???** - ???????? JSON ??
2. **?? JSON ??** - ??????? JSON ?????
3. **????** - ??????? JSON ??
4. **????** - ????????????
5. **????** - ???? JSON ????
6. **????** - ??????????
7. **JSONPath ??** - ???? JSONPath ????

## ?????

### ?? build.sh ??????

```bash
# ?? shell ??????
./build.sh
```

### ?? Makefile

```bash
# ??????
make

# ??????
make run

# ??????
./json_example

# ???????
make clean
```

### ????

????????????????????

```bash
# ?? double-conversion ?
g++ -std=c++17 -O2 -c ../double-conversion/*.cc

# ?????
ar rcs double-conversion.a *.o

# ?????
g++ -std=c++17 -O2 -I.. -c main.cpp
g++ -std=c++17 -O2 -I.. -c ../json.cpp

# ?????????
g++ -std=c++17 -o json_example main.o ../json.o double-conversion.a
```

## ????

### ?? JSON

```cpp
#include "../json.h"
using jt::Json;

const char* jsonStr = R"({"name": "??", "age": 25})";
auto [status, json] = Json::parse(jsonStr);

if (status == Json::success) {
    std::string name = json["name"].getString();
    long age = json["age"].getLong();
}
```

### ?? JSON ??

```cpp
Json obj;
obj.setObject();
obj["name"] = "??";
obj["age"] = 30;
obj["height"] = 1.75;

std::string jsonString = obj.toStringPretty();
```

### ????

```cpp
Json arr;
arr.setArray();
arr.getArray().push_back(1);
arr.getArray().push_back(2);
arr.getArray().push_back("hello");
```

### ??????

```cpp
Json company;
company.setObject();
company["employees"].setArray();

Json emp;
emp.setObject();
emp["name"] = "??";
emp["salary"] = 15000;

company["employees"].getArray().push_back(emp);

// ??????
std::string name = company["employees"][0]["name"].getString();
```

## API ??

### ????

- `Json::parse(string)` - ?? JSON ?????? `(Status, Json)` ??
- `getType()` - ?? JSON ????
- `isNull()`, `isBool()`, `isNumber()`, `isString()`, `isArray()`, `isObject()` - ????
- `toString()` - ?????? JSON ???
- `toStringPretty()` - ??????? JSON ???

### ????

```cpp
if (json.isString()) {
    std::string value = json.getString();
} else if (json.isNumber()) {
    double value = json.getNumber();
} else if (json.isArray()) {
    std::vector<Json>& arr = json.getArray();
}
```

### ????

- `operator[](const std::string&)` - ??????
- `operator[](size_t)` - ??????
- `getString()` - ??????
- `getLong()` - ?????
- `getDouble()` / `getFloat()` - ??????
- `getBool()` - ?????
- `getArray()` - ??????
- `getObject()` - ??????

### JSONPath ??

```cpp
auto results = json.jsonpath("$.store.book[?(@.price > 35)]");
for (Json* node : results) {
    // ???????
}
```

## ??

- C++17 ??????????????????????
- g++ ?????
- double-conversion ??????????
- make ????????????? Makefile ????

## ???

??????????????????Apache License 2.0??
